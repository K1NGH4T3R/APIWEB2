{
  "openapi": "3.0.1",
  "info": {
    "title": "API de Gerenciamento de Atividades",
    "description": "Esta documentação descreve uma API RESTful para gerenciamento de atividades, incluindo funcionalidades de cadastro de usuários, autenticação, gerenciamento de atividades e registro de artefatos.",
    "version": "1.0.0"
  },
  "paths": {
    "/api/user": {
      "post": {
        "summary": "Cadastro de Usuários",
        "description": "Permite o cadastro de novos usuários fornecendo um nome de usuário, uma senha e uma role.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "Nome de usuário."
                  },
                  "password": {
                    "type": "string",
                    "description": "Senha do usuário."
                  },
                  "role": {
                    "type": "integer",
                    "description": "Tipo de usuário (1 para Administrador, 2 para Usuário Comum)."
                  }
                },
                "required": ["username", "password", "role"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Usuário criado com sucesso."
          },
          "400": {
            "description": "Falha na criação do usuário (e.g., campos obrigatórios ausentes, nome de usuário já existente)."
          }
        }
      }
    },
    "/api/login": {
      "post": {
        "summary": "Autenticação de Usuários",
        "description": "Permite que os usuários façam login e recebam um token de autenticação para acessar funcionalidades protegidas.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "username": {
                    "type": "string",
                    "description": "Nome de usuário."
                  },
                  "password": {
                    "type": "string",
                    "description": "Senha do usuário."
                  }
                },
                "required": ["username", "password"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login bem-sucedido. Retorna um token de autenticação."
          },
          "401": {
            "description": "Credenciais inválidas."
          }
        }
      }
    },
    "/api/activity": {
      "post": {
        "summary": "Cadastro de Atividades",
        "description": "Permite que usuários autenticados cadastrem novas atividades.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Título da atividade."
                  },
                  "assigned_to": {
                    "type": "string",
                    "description": "Quem precisa fazer a atividade."
                  }
                },
                "required": ["name"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Atividade criada com sucesso."
          },
          "400": {
            "description": "Falha na criação da atividade."
          }
        }
      },
      "get": {
        "summary": "Listar Todas as Atividades",
        "description": "Permite que usuários autenticados obtenham uma lista de todas as atividades.",
        "responses": {
          "200": {
            "description": "Retorna uma lista de atividades."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      }
    },
    "/api/activity/{id}": {
      "put": {
        "summary": "Atribuir Atividades a Outros Usuários",
        "description": "Permite que um usuário autenticado atribua uma atividade a outro usuário.",
        "parameters": [{
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID da atividade"
        }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "assigned_to": {
                    "type": "string",
                    "description": "ID do usuário ao qual a atividade será atribuída."
                  }
                },
                "required": ["assigned_to"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Atividade atribuída com sucesso."
          },
          "400": {
            "description": "Falha na atribuição da atividade."
          }
        }
      },
      "delete": {
        "summary": "Deletar Atividade",
        "description": "Permite que usuários autenticados deletem uma atividade.",
        "parameters": [{
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID da atividade"
        }],
        "responses": {
          "200": {
            "description": "Atividade deletada com sucesso."
          },
          "404": {
            "description": "Atividade não encontrada."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      },
      "get": {
        "summary": "Obter Detalhes de uma Atividade",
        "description": "Permite que usuários autenticados obtenham detalhes de uma atividade específica.",
        "parameters": [{
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID da atividade"
        }],
        "responses": {
          "200": {
            "description": "Retorna os detalhes da atividade."
          },
          "404": {
            "description": "Atividade não encontrada."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      }
    },
    "/api/user/{username}/activity": {
      "get": {
        "summary": "Listar Atividades de um Usuário",
        "description": "Permite que usuários autenticados obtenham uma lista de atividades de um usuário específico.",
        "parameters": [{
          "name": "username",
          "in": "path",
          "required": true,
          "schema": {"type": "string"},
          "description": "Nome do usuário"
        }],
        "responses": {
          "200": {
            "description": "Retorna uma lista de atividades do usuário."
          },
          "404": {
            "description": "Usuário não encontrado."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      }
    },
    "/api/activity/{id}/artifact": {
      "post": {
        "summary": "Registro de Artefatos para Atividades",
        "description": "Permite que usuários autenticados registrem artefatos para atividades.",
        "parameters": [{
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID da atividade"
        }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Nome do artefato."
                  },
                  "activity_id": {
                    "type": "integer",
                    "description": "ID da atividade."
                  }
                },
                "required": ["name", "activity_id"]
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Artefato registrado com sucesso."
          },
          "400": {
            "description": "Falha no registro do artefato."
          }
        }
      },
      "get": {
        "summary": "Listar Artefatos de uma Atividade",
        "description": "Permite que usuários autenticados obtenham uma lista de artefatos de uma atividade específica.",
        "parameters": [{
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID da atividade"
        }],
        "responses": {
          "200": {
            "description": "Retorna uma lista de artefatos da atividade."
          },
          "404": {
            "description": "Atividade não encontrada."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      }
    },
    "/api/activity/{id}/artifact/{artifactId}": {
      "get": {
        "summary": "Obter Detalhes de um Artefato",
        "description": "Permite que usuários autenticados obtenham detalhes de um artefato específico.",
        "parameters": [{
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID da atividade"
        }, {
          "name": "artifactId",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID do artefato"
        }],
        "responses": {
          "200": {
            "description": "Retorna os detalhes do artefato."
          },
          "404": {
            "description": "Artefato não encontrado."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      },
      "put": {
        "summary": "Atualizar Artefato",
        "description": "Permite que usuários autenticados atualizem os dados de um artefato.",
        "parameters": [{
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID da atividade"
        }, {
          "name": "artifactId",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID do artefato"
        }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Nome do artefato."
                  }
                },
                "required": ["name"]
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Artefato atualizado com sucesso."
          },
          "400": {
            "description": "Falha na atualização do artefato."
          },
          "404": {
            "description": "Artefato não encontrado."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      },
      "delete": {
        "summary": "Deletar Artefato",
        "description": "Permite que usuários autenticados deletem um artefato.",
        "parameters": [{
          "name": "id",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID da atividade"
        }, {
          "name": "artifactId",
          "in": "path",
          "required": true,
          "schema": {"type": "integer"},
          "description": "ID do artefato"
        }],
        "responses": {
          "200": {
            "description": "Artefato deletado com sucesso."
          },
          "404": {
            "description": "Artefato não encontrado."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      }
    },
    "/api/user": {
      "get": {
        "summary": "Listar Usuários",
        "description": "Permite que usuários autenticados obtenham uma lista de todos os usuários.",
        "responses": {
          "200": {
            "description": "Retorna uma lista de usuários."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      }
    },
    "/api/user/{username}": {
      "get": {
        "summary": "Obter Detalhes de um Usuário",
        "description": "Permite que usuários autenticados obtenham detalhes de um usuário específico.",
        "parameters": [{
          "name": "username",
          "in": "path",
          "required": true,
          "schema": {"type": "string"},
          "description": "Nome de usuário"
        }],
        "responses": {
          "200": {
            "description": "Retorna os detalhes do usuário."
          },
          "404": {
            "description": "Usuário não encontrado."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      },
      "put": {
        "summary": "Atualizar Usuário",
        "description": "Permite que usuários autenticados atualizem os dados de um usuário.",
        "parameters": [{
          "name": "username",
          "in": "path",
          "required": true,
          "schema": {"type": "string"},
          "description": "Nome de usuário"
        }],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "password": {
                    "type": "string",
                    "description": "Senha do usuário."
                  },
                  "role": {
                    "type": "integer",
                    "description": "Tipo de usuário."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Usuário atualizado com sucesso."
          },
          "400": {
            "description": "Falha na atualização do usuário."
          },
          "404": {
            "description": "Usuário não encontrado."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      },
      "delete": {
        "summary": "Deletar Usuário",
        "description": "Permite que usuários autenticados deletem um usuário.",
        "parameters": [{
          "name": "username",
          "in": "path",
          "required": true,
          "schema": {"type": "string"},
          "description": "Nome de usuário"
        }],
        "responses": {
          "200": {
            "description": "Usuário deletado com sucesso."
          },
          "404": {
            "description": "Usuário não encontrado."
          },
          "401": {
            "description": "Token de autenticação ausente ou inválido."
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    },
    "schemas": {
      "Usuario": {
        "type": "object",
        "properties": {
          "username": {"type": "string"},
          "password": {"type": "string"},
          "role": {"type": "integer"}
        }
      },
      "Atividade": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "assigned_to": {"type": "string"}
        }
      },
      "Artefato": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "activity_id": {"type": "integer"}
        }
      }
    }
  }
}
